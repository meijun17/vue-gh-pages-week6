(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-041fe10c"],{"00b4":function(t,e,a){"use strict";a("ac1f");var n=a("23e7"),c=a("da84"),r=a("c65b"),s=a("e330"),o=a("1626"),l=a("861d"),i=function(){var t=!1,e=/[ac]/;return e.exec=function(){return t=!0,/./.exec.apply(this,arguments)},!0===e.test("abc")&&t}(),u=c.Error,d=s(/./.test);n({target:"RegExp",proto:!0,forced:!i},{test:function(t){var e=this.exec;if(!o(e))return d(this,t);var a=r(e,this,t);if(null!==a&&!l(a))throw new u("RegExp exec method returned something other than an Object or null");return!!a}})},"107c":function(t,e,a){var n=a("d039"),c=a("da84"),r=c.RegExp;t.exports=n((function(){var t=r("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")}))},"1dde":function(t,e,a){var n=a("d039"),c=a("b622"),r=a("2d00"),s=c("species");t.exports=function(t){return r>=51||!n((function(){var e=[],a=e.constructor={};return a[s]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"6be2":function(t,e,a){"use strict";var n=function(t){return{all:t=t||new Map,on:function(e,a){var n=t.get(e);n?n.push(a):t.set(e,[a])},off:function(e,a){var n=t.get(e);n&&(a?n.splice(n.indexOf(a)>>>0,1):t.set(e,[]))},emit:function(e,a){var n=t.get(e);n&&n.slice().map((function(t){t(a)})),(n=t.get("*"))&&n.slice().map((function(t){t(e,a)}))}}},c=n();e["a"]=c},8418:function(t,e,a){"use strict";var n=a("a04b"),c=a("9bf2"),r=a("5c6c");t.exports=function(t,e,a){var s=n(e);s in t?c.f(t,s,r(0,a)):t[s]=a}},9263:function(t,e,a){"use strict";var n=a("c65b"),c=a("e330"),r=a("577e"),s=a("ad6d"),o=a("9f7f"),l=a("5692"),i=a("7c73"),u=a("69f3").get,d=a("fce3"),b=a("107c"),f=l("native-string-replace",String.prototype.replace),h=RegExp.prototype.exec,m=h,p=c("".charAt),g=c("".indexOf),j=c("".replace),O=c("".slice),v=function(){var t=/a/,e=/b*/g;return n(h,t,"a"),n(h,e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),x=o.BROKEN_CARET,y=void 0!==/()??/.exec("")[1],I=v||y||x||d||b;I&&(m=function(t){var e,a,c,o,l,d,b,I=this,S=u(I),E=r(t),k=S.raw;if(k)return k.lastIndex=I.lastIndex,e=n(m,k,E),I.lastIndex=k.lastIndex,e;var C=S.groups,w=x&&I.sticky,R=n(s,I),V=I.source,_=0,L=E;if(w&&(R=j(R,"y",""),-1===g(R,"g")&&(R+="g"),L=O(E,I.lastIndex),I.lastIndex>0&&(!I.multiline||I.multiline&&"\n"!==p(E,I.lastIndex-1))&&(V="(?: "+V+")",L=" "+L,_++),a=new RegExp("^(?:"+V+")",R)),y&&(a=new RegExp("^"+V+"$(?!\\s)",R)),v&&(c=I.lastIndex),o=n(h,w?a:I,L),w?o?(o.input=O(o.input,_),o[0]=O(o[0],_),o.index=I.lastIndex,I.lastIndex+=o[0].length):I.lastIndex=0:v&&o&&(I.lastIndex=I.global?o.index+o[0].length:c),y&&o&&o.length>1&&n(f,o[0],a,(function(){for(l=1;l<arguments.length-2;l++)void 0===arguments[l]&&(o[l]=void 0)})),o&&C)for(o.groups=d=i(null),l=0;l<C.length;l++)b=C[l],d[b[0]]=o[b[1]];return o}),t.exports=m},"99af":function(t,e,a){"use strict";var n=a("23e7"),c=a("da84"),r=a("d039"),s=a("e8b5"),o=a("861d"),l=a("7b0b"),i=a("07fa"),u=a("8418"),d=a("65f0"),b=a("1dde"),f=a("b622"),h=a("2d00"),m=f("isConcatSpreadable"),p=9007199254740991,g="Maximum allowed index exceeded",j=c.TypeError,O=h>=51||!r((function(){var t=[];return t[m]=!1,t.concat()[0]!==t})),v=b("concat"),x=function(t){if(!o(t))return!1;var e=t[m];return void 0!==e?!!e:s(t)},y=!O||!v;n({target:"Array",proto:!0,forced:y},{concat:function(t){var e,a,n,c,r,s=l(this),o=d(s,0),b=0;for(e=-1,n=arguments.length;e<n;e++)if(r=-1===e?s:arguments[e],x(r)){if(c=i(r),b+c>p)throw j(g);for(a=0;a<c;a++,b++)a in r&&u(o,b,r[a])}else{if(b>=p)throw j(g);u(o,b++,r)}return o.length=b,o}})},"9f7f":function(t,e,a){var n=a("d039"),c=a("da84"),r=c.RegExp,s=n((function(){var t=r("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),o=s||n((function(){return!r("a","y").sticky})),l=s||n((function(){var t=r("^r","gy");return t.lastIndex=2,null!=t.exec("str")}));t.exports={BROKEN_CARET:l,MISSED_STICKY:o,UNSUPPORTED_Y:s}},ac1f:function(t,e,a){"use strict";var n=a("23e7"),c=a("9263");n({target:"RegExp",proto:!0,forced:/./.exec!==c},{exec:c})},ad6d:function(t,e,a){"use strict";var n=a("825a");t.exports=function(){var t=n(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},b0c0:function(t,e,a){var n=a("83ab"),c=a("5e77").EXISTS,r=a("e330"),s=a("9bf2").f,o=Function.prototype,l=r(o.toString),i=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,u=r(i.exec),d="name";n&&!c&&s(o,d,{configurable:!0,get:function(){try{return u(i,l(this))[1]}catch(t){return""}}})},cc55:function(t,e,a){"use strict";a.r(e);a("b0c0"),a("b64b");var n=a("7a23"),c={class:"container"},r=Object(n["h"])("h2",null,"購物車",-1),s={class:"text-end"},o={class:"table align-middle"},l=Object(n["h"])("thead",null,[Object(n["h"])("tr",null,[Object(n["h"])("th"),Object(n["h"])("th",null,"品名"),Object(n["h"])("th",{style:{width:"110px"}},"數量"),Object(n["h"])("th",null,"單價")])],-1),i=["onClick","disabled"],u={key:0,class:"fas fa-spinner fa-pulse"},d=Object(n["i"])(" 移除商品 "),b={key:0,class:"text-success"},f={class:"input-group input-group-sm"},h={class:"input-group mb-3"},m=["onUpdate:modelValue","onBlur","disabled"],p={class:"input-group-text",id:"basic-addon2"},g={class:"text-end"},j={key:0,class:"text-success"},O=Object(n["h"])("td",{colspan:"3",class:"text-end"},"總計",-1),v={class:"text-end"},x={key:0},y=Object(n["h"])("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),I={class:"text-end text-success"},S={class:"my-5 row justify-content-center"},E={class:"mb-3"},k=Object(n["h"])("label",{for:"email",class:"form-label"},"Email",-1),C={class:"mb-3"},w=Object(n["h"])("label",{for:"name",class:"form-label"},"收件人姓名",-1),R={class:"mb-3"},V=Object(n["h"])("label",{for:"tel",class:"form-label"},"收件人電話",-1),_={class:"mb-3"},L=Object(n["h"])("label",{for:"address",class:"form-label"},"收件人地址",-1),U={class:"mb-3"},$=Object(n["h"])("label",{for:"message",class:"form-label"},"留言",-1),A={class:"text-end"},q=["disabled"];function J(t,e,a,J,M,N){var T=Object(n["G"])("Loading"),B=Object(n["G"])("Field"),F=Object(n["G"])("ErrorMessage"),G=Object(n["G"])("Form");return Object(n["y"])(),Object(n["g"])("div",c,[Object(n["h"])("div",null,[r,Object(n["j"])(T,{active:M.isLoading},null,8,["active"]),Object(n["h"])("div",s,[Object(n["h"])("button",{class:"btn btn-outline-danger",type:"button",onClick:e[0]||(e[0]=function(t){return N.deleteAllCarts()})},"清空購物車")]),Object(n["h"])("table",o,[l,Object(n["h"])("tbody",null,[M.cart.carts?(Object(n["y"])(!0),Object(n["g"])(n["a"],{key:0},Object(n["E"])(M.cart.carts,(function(t){return Object(n["y"])(),Object(n["g"])("tr",{key:t.id},[Object(n["h"])("td",null,[Object(n["h"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:function(e){return N.removeCartItem(t.id)},disabled:M.loadingStatus.loadingItem===t.id},[M.loadingStatus.loadingItem===t.id?(Object(n["y"])(),Object(n["g"])("i",u)):Object(n["f"])("",!0),d],8,i)]),Object(n["h"])("td",null,[Object(n["i"])(Object(n["J"])(t.product.title)+" ",1),t.coupon?(Object(n["y"])(),Object(n["g"])("div",b," 已套用優惠券 ")):Object(n["f"])("",!0)]),Object(n["h"])("td",null,[Object(n["h"])("div",f,[Object(n["h"])("div",h,[Object(n["S"])(Object(n["h"])("input",{min:"1",type:"number",class:"form-control","onUpdate:modelValue":function(e){return t.qty=e},onBlur:function(e){return N.updateCart(t)},disabled:M.loadingStatus.loadingItem===t.id},null,40,m),[[n["M"],t.qty,void 0,{number:!0}]]),Object(n["h"])("span",p,Object(n["J"])(t.product.unit),1)])])]),Object(n["h"])("td",g,[M.cart.final_total!==t.total?(Object(n["y"])(),Object(n["g"])("small",j,"折扣價：")):Object(n["f"])("",!0),Object(n["i"])(" "+Object(n["J"])(t.final_total),1)])])})),128)):Object(n["f"])("",!0)]),Object(n["h"])("tfoot",null,[Object(n["h"])("tr",null,[O,Object(n["h"])("td",v,Object(n["J"])(M.cart.total),1)]),M.cart.final_total!==M.cart.total?(Object(n["y"])(),Object(n["g"])("tr",x,[y,Object(n["h"])("td",I,Object(n["J"])(M.cart.final_total),1)])):Object(n["f"])("",!0)])])]),Object(n["h"])("div",S,[Object(n["j"])(G,{ref:"form",class:"col-md-6",onSubmit:N.onSubmit},{default:Object(n["R"])((function(t){var a=t.errors;return[Object(n["h"])("div",E,[k,Object(n["j"])(B,{id:"email",name:"email",type:"email",class:Object(n["r"])(["form-control",{"is-invalid":a["email"]}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:M.form.user.email,"onUpdate:modelValue":e[1]||(e[1]=function(t){return M.form.user.email=t})},null,8,["class","modelValue"]),Object(n["j"])(F,{name:"email",class:"invalid-feedback"})]),Object(n["h"])("div",C,[w,Object(n["j"])(B,{id:"name",name:"userName",type:"text",class:Object(n["r"])(["form-control",{"is-invalid":a["userName"]}]),placeholder:"請輸入姓名",rules:"required",modelValue:M.form.user.name,"onUpdate:modelValue":e[2]||(e[2]=function(t){return M.form.user.name=t})},null,8,["class","modelValue"]),Object(n["j"])(F,{name:"userName",class:"invalid-feedback"})]),Object(n["h"])("div",R,[V,Object(n["j"])(B,{id:"tel",name:"phone",type:"text",class:Object(n["r"])(["form-control",{"is-invalid":a["phone"]}]),placeholder:"0912345678",rules:N.isPhone,modelValue:M.form.user.tel,"onUpdate:modelValue":e[3]||(e[3]=function(t){return M.form.user.tel=t})},null,8,["class","rules","modelValue"]),Object(n["j"])(F,{name:"phone",class:"invalid-feedback"})]),Object(n["h"])("div",_,[L,Object(n["j"])(B,{id:"address",name:"address",type:"text",class:Object(n["r"])(["form-control",{"is-invalid":a["address"]}]),placeholder:"請輸入地址",rules:"required",modelValue:M.form.user.address,"onUpdate:modelValue":e[4]||(e[4]=function(t){return M.form.user.address=t})},null,8,["class","modelValue"]),Object(n["j"])(F,{name:"address",class:"invalid-feedback"})]),Object(n["h"])("div",U,[$,Object(n["S"])(Object(n["h"])("textarea",{id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":e[5]||(e[5]=function(t){return M.form.message=t})},null,512),[[n["M"],M.form.message]])]),Object(n["h"])("div",A,[Object(n["h"])("button",{type:"submit",class:"btn btn-danger",disabled:0===M.cart.carts.length||Object.keys(a).length>0}," 送出訂單 ",8,q)])]})),_:1},8,["onSubmit"])])])}a("99af"),a("ac1f"),a("00b4");var M=a("6be2"),N={data:function(){return{loadingStatus:{loadingItem:""},isLoading:!1,cart:{carts:[]},form:{user:{name:"",email:"",tel:"",address:""},message:""},coupon_code:""}},mounted:function(){this.getCart()},methods:{getCart:function(){var t=this;this.isLoading=!0;var e="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("shila-hexschool","/cart");this.$http.get(e).then((function(e){t.cart=e.data.data,t.isLoading=!1})).catch((function(t){alert(t.data.message)}))},removeCartItem:function(t){var e=this;this.isLoading=!0;var a="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("shila-hexschool","/cart/").concat(t);this.loadingStatus.loadingItem=t,this.$http.delete(a).then((function(t){alert(t.data.message),M["a"].emit("get-cart"),e.getCart()})).catch((function(t){alert(t.data.message)})),this.loadingStatus.loadingItem="",this.isLoading=!1},updateCart:function(t){var e=this;this.loadingStatus.loadingItem=t.id;var a={product_id:t.product_id,qty:t.qty};this.$http.put("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("shila-hexschool","/cart/").concat(t.id),{data:a}).then((function(t){alert(t.data.message),e.loadingStatus.loadingItem="",e.getCart()})).catch((function(t){alert(t.data.message),e.loadingStatus.loadingItem=""}))},deleteAllCarts:function(){var t=this;this.$http.delete("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("shila-hexschool","/carts")).then((function(e){alert(e.data.message),M["a"].emit("get-cart"),t.getCart()})).catch((function(t){alert(t.data.message)}))},isPhone:function(t){var e=/^(09)[0-9]{8}$/;return!!e.test(t)||"請輸入正確的號碼格式"},onSubmit:function(){var t=this;this.isLoading=!0;var e=this.form;this.$http.post("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("shila-hexschool","/order"),{data:e}).then((function(e){t.$refs.form.resetForm(),t.form.message="",t.isLoading=!1})).catch((function(t){alert(t.data.message)}))}}},T=a("6b0d"),B=a.n(T);const F=B()(N,[["render",J]]);e["default"]=F},fce3:function(t,e,a){var n=a("d039"),c=a("da84"),r=c.RegExp;t.exports=n((function(){var t=r(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)}))}}]);
//# sourceMappingURL=chunk-041fe10c.1cf824c8.js.map